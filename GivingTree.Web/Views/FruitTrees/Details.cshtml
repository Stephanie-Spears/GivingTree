@using GivingTree.Data.Models
@using Microsoft.AspNet.Identity
@model GivingTree.Data.Models.FruitTree

@{
	ViewBag.Title = "Details";
}

<h2>Details for @Html.DisplayFor(model => model.Name)</h2>

<div>
	<h4>Tree</h4>
	<hr />
	<dl class="row">

		@if (Model.Files.Any(f => f.FileType == FileType.Avatar))
		{
			<dt>
				Photo
			</dt>
			<dd>
				<img src="~/File?id=@Model.Files.First(f => f.FileType == FileType.Avatar).FileId" alt="avatar"/>
			</dd>
		}

		<dt class="col-sm-3">
			@Html.DisplayNameFor(model => model.Name)
		</dt>
		<dd class="col-sm-9">
			@Html.DisplayFor(model => model.Name)
		</dd>

		<dt class="col-sm-3">
			@Html.DisplayNameFor(model => model.Fruit)
		</dt>
		<dd class="col-sm-9">
			@Html.DisplayFor(model => model.Fruit)
		</dd>

		<dt class="col-sm-3">
			@Html.DisplayNameFor(model => model.Description)
		</dt>
		<dd class="col-sm-9">
			@Html.DisplayFor(model => model.Description)
		</dd>

		<dt class="col-sm-3">
			@Html.DisplayNameFor(model => model.Latitude)
		</dt>
		<dd class="col-sm-9">
			@Html.DisplayFor(model => model.Latitude)
		</dd>
		<dt class="col-sm-3">
			@Html.DisplayNameFor(model => model.Longitude)
		</dt>
		<dd class="col-sm-9">
			@Html.DisplayFor(model => model.Longitude)
		</dd>
		<dt class="col-sm-3">
			@Html.DisplayNameFor(model => model.CreatedByUserName)
		</dt>
		<dd class="col-sm-9">
			@Html.DisplayFor(model => model.CreatedByUserName)
		</dd>

		<dt class="col-sm-3">
			@Html.DisplayNameFor(model => model.LastUpdated)
		</dt>
		<dd class="col-sm-9">
			@Html.DisplayFor(model => model.LastUpdated)
		</dd>
	</dl>
</div>
<p>
	@if (Model.CreatedByUserId == User.Identity.GetUserId())
	{
		@Html.ActionLink("Edit", "Edit", new { id = Model.Id }) 
		@Html.Encode(" | ")
	}

	@Html.ActionLink("Back to List", "Index")
</p>